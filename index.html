<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.0.16/svg.min.js" integrity="sha512-p3Tp2zn+wApBreZCgRkmMwnfpN8MUPXzzOihXx7iGYXqE7t6m9drY8HeyMeeFuDWiTFKrGUrq3jpbT0vX6zY/Q==" crossorigin="anonymous"></script>
    <script src="trifold.js"></script>
  </head>
  <body onload="draw();">
    <div>
      <label>Vertical Margin: <input id="margin-vertical-input" type="number" min="0" max="30" value="10" oninput="draw();"/></label>
      <label>Horizontal Margin: <input id="margin-horizontal-input" type="number" min="0" max="30" value="10" oninput="draw();"/></label>
      <label>Gutter: <input id="gutter-input" type="number" min="0" max="30" value="10" oninput="draw();"/></label>
    </div>
    <div>
      <h1>Outside</h1>
      <p id="desc-outside"></p>
      <svg id="diagram-outside"></svg>
    </div>
    <div>
      <h1>Inside</h1>
      <p id="desc-inside"></p>
      <svg id="diagram-inside"></svg>
    </div>
    <script>
      const hmargin_input = document.getElementById('margin-horizontal-input');
      const vmargin_input = document.getElementById('margin-vertical-input');
      const gutter_input = document.getElementById('gutter-input');
      const desc_outside = document.getElementById('desc-outside');
      const desc_inside = document.getElementById('desc-inside');

      function describe(layout) {
        let s = "";
        s += `Folds at ${layout.folds.join(', ')}. `;
        let a = layout.panels.flatMap(p => [p.x, p.x + p.w]);
        s += `Vertical rulers at ${a.join(', ')}. `;
        let p = layout.panels[0]
        s += `Vertical rulers at ${p.y}, ${p.y + p.h}.`;
        return s;
      }

      function draw() {
        let layout = new Layout();
        layout.pageWidth = 297;
        layout.pageHeight = 210;
        layout.hmargin = parseInt(hmargin_input.value, 10);
        layout.vmargin = parseInt(vmargin_input.value, 10);
        layout.gutter = parseInt(gutter_input.value, 10);

        drawMetrics('#diagram-outside', getOutsideMetrics(layout));
        desc_outside.innerHTML = describe(layout);
        drawMetrics('#diagram-inside', getInsideMetrics(layout));
        desc_inside.innerHTML = describe(layout);

        //let s = `Folds at ${layout.folds.join(', ')}.`;
        //console.log(s);
      }
    </script>
  </body>
</html>
